{"ast":null,"code":"import _objectSpread from\"/home/runner/work/blackjack-gto/blackjack-gto/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/home/runner/work/blackjack-gto/blackjack-gto/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/runner/work/blackjack-gto/blackjack-gto/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"styles/_common.scss\";import{connect}from\"react-redux\";import ColorConstants from\"utils/constants/ColorConstants\";import BasicStrategyServiceFE from\"services/BasicStrategyServiceFE\";import{useEffect,useState}from\"react\";import TableUtils from\"utils/TableUtils\";import _ from\"lodash\";import Typography from\"@mui/material/Typography\";import Box from\"@mui/material/Box\";import Table from\"@mui/material/Table\";import TableBody from\"@mui/material/TableBody\";import TableCell from\"@mui/material/TableCell\";import TableContainer from\"@mui/material/TableContainer\";import TableRow from\"@mui/material/TableRow\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function createData(playerHand,values){return{playerHand:playerHand,values:values};}var tdStyle={cell:{border:\"2px solid rgb(53,55,64)\",width:30,height:30,boxSizing:\"border-box\",position:\"relative\",padding:\"0px\",color:\"#fff\"},handValue:{backgroundColor:\"rgba(128, 128, 128, 0.7)\"}};var BasicStrategyChart=function BasicStrategyChart(props){var table=props.table,basicStrategyCharts=props.basicStrategyCharts;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rows=_useState2[0],setRow=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),dealerShownCards=_useState4[0],setDealerShownCards=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),sideBarText=_useState6[0],setSideBarText=_useState6[1];var handleChart;useEffect(function(){BasicStrategyServiceFE.getBasicStrategyCharts();var range=_toConsumableArray(Array(9).keys());setDealerShownCards([].concat(_toConsumableArray(range.map(function(r){return r+2;})),[\"A\"]));},[]);useEffect(function(){if(!basicStrategyCharts||!table||table.turnId>0)return;var player=TableUtils.findPlayerById(table.players,table.turnId);handleChart(player,basicStrategyCharts);},[table,basicStrategyCharts,handleChart]);handleChart=function handleChart(player){if(player.isSoft){setSideBarText(\"Soft Values\");getRow(basicStrategyCharts.soft,true,false);}else if(player.hasPair){setSideBarText(\"Pair Values\");getRow(basicStrategyCharts.pair,false,true);}else{setSideBarText(\"Hard Values\");getRow(basicStrategyCharts.hand,false,false);}};var getRow=function getRow(chart,isSoft,hasPair){var localRow=[];_.forOwn(chart,function(val,key){var handValue;if(isSoft){if(parseInt(key)===12)handValue=\"A,A\";else handValue=\"A,\".concat(key-11);}else if(hasPair){if(parseInt(key)===28)handValue=\"A,A\";else{var value=key/2;handValue=\"\".concat(value,\",\").concat(value);}}else{handValue=key;}localRow.push(createData(handValue,_toConsumableArray(Object.values(val))));});setRow(localRow.reverse());};return/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsxs(TableContainer,{sx:{backgroundColor:\"rgba(0, 0, 0, 0.7)\",display:\"flex\",borderRadius:\"20px\"},children:[/*#__PURE__*/_jsx(Box,{sx:{color:\"#fff\",writingMode:\"vertical-lr\",transform:\"rotate(180deg)\"},children:/*#__PURE__*/_jsx(Typography,{sx:{px:1},children:sideBarText})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Box,{sx:{color:\"#fff\"},children:/*#__PURE__*/_jsx(Typography,{sx:{py:1},children:\"Dealer Shown Card\"})}),/*#__PURE__*/_jsx(Table,{\"aria-label\":\"simple table\",children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{sx:{position:\"relative\"},children:[/*#__PURE__*/_jsx(TableCell,{sx:_objectSpread(_objectSpread({},tdStyle.cell),tdStyle.handValue)}),dealerShownCards.map(function(dealerShownCard){return/*#__PURE__*/_jsx(TableCell,{sx:_objectSpread(_objectSpread({},tdStyle.cell),tdStyle.handValue),align:\"center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"horizontal-center-absolute vertical-center-absolute\",children:dealerShownCard})});})]}),rows.map(function(row){return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{sx:_objectSpread(_objectSpread({},tdStyle.cell),tdStyle.handValue),align:\"center\",children:row.playerHand}),row.values.map(function(val){return/*#__PURE__*/_jsx(TableCell,{sx:_objectSpread(_objectSpread({},tdStyle.cell),ColorConstants.BACKGROUND_COLORS[val]),align:\"center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"horizontal-center-absolute vertical-center-absolute\",children:val})});})]},row.name);})]})})]})]})});};var mapStateToProps=function mapStateToProps(state){var _state$table;return{table:(_state$table=state.table)===null||_state$table===void 0?void 0:_state$table.table,showBasicStrategyChart:state.settings.showBasicStrategyChart,basicStrategyCharts:state.basicStrategy.basicStrategyCharts};};export default connect(mapStateToProps,null)(BasicStrategyChart);","map":{"version":3,"names":["connect","ColorConstants","BasicStrategyServiceFE","useEffect","useState","TableUtils","_","Typography","Box","Table","TableBody","TableCell","TableContainer","TableRow","createData","playerHand","values","tdStyle","cell","border","width","height","boxSizing","position","padding","color","handValue","backgroundColor","BasicStrategyChart","props","table","basicStrategyCharts","rows","setRow","dealerShownCards","setDealerShownCards","sideBarText","setSideBarText","handleChart","getBasicStrategyCharts","range","Array","keys","map","r","turnId","player","findPlayerById","players","isSoft","getRow","soft","hasPair","pair","hand","chart","localRow","forOwn","val","key","parseInt","value","push","Object","reverse","display","borderRadius","writingMode","transform","px","py","dealerShownCard","row","BACKGROUND_COLORS","name","mapStateToProps","state","showBasicStrategyChart","settings","basicStrategy"],"sources":["/home/runner/work/blackjack-gto/blackjack-gto/client/src/components/basicStrategy/BasicStrategyChart.js"],"sourcesContent":["import \"styles/_common.scss\";\nimport { connect } from \"react-redux\";\nimport ColorConstants from \"utils/constants/ColorConstants\";\nimport BasicStrategyServiceFE from \"services/BasicStrategyServiceFE\";\nimport { useEffect, useState } from \"react\";\nimport TableUtils from \"utils/TableUtils\";\nimport _ from \"lodash\";\n\nimport Typography from \"@mui/material/Typography\";\nimport Box from \"@mui/material/Box\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableRow from \"@mui/material/TableRow\";\n\nfunction createData(playerHand, values) {\n  return {\n    playerHand,\n    values\n  };\n}\n\nconst tdStyle = {\n  cell: {\n    border: \"2px solid rgb(53,55,64)\",\n    width: 30,\n    height: 30,\n    boxSizing: \"border-box\",\n    position: \"relative\",\n    padding: \"0px\",\n    color: \"#fff\"\n  },\n  handValue: {\n    backgroundColor: \"rgba(128, 128, 128, 0.7)\"\n  }\n};\n\nconst BasicStrategyChart = (props) => {\n  const { table, basicStrategyCharts } = props;\n  const [rows, setRow] = useState([]);\n  const [dealerShownCards, setDealerShownCards] = useState([]);\n  const [sideBarText, setSideBarText] = useState(\"\");\n  let handleChart;\n\n  useEffect(() => {\n    BasicStrategyServiceFE.getBasicStrategyCharts();\n    let range = [...Array(9).keys()];\n    setDealerShownCards([...range.map((r) => r + 2), \"A\"]);\n  }, []);\n\n  useEffect(() => {\n    if (!basicStrategyCharts || !table || table.turnId > 0) return;\n    let player = TableUtils.findPlayerById(table.players, table.turnId);\n    handleChart(player, basicStrategyCharts);\n  }, [table, basicStrategyCharts, handleChart]);\n\n  handleChart = (player) => {\n    if (player.isSoft) {\n      setSideBarText(\"Soft Values\");\n      getRow(basicStrategyCharts.soft, true, false);\n    } else if (player.hasPair) {\n      setSideBarText(\"Pair Values\");\n      getRow(basicStrategyCharts.pair, false, true);\n    } else {\n      setSideBarText(\"Hard Values\");\n      getRow(basicStrategyCharts.hand, false, false);\n    }\n  };\n\n  const getRow = (chart, isSoft, hasPair) => {\n    let localRow = [];\n    _.forOwn(chart, (val, key) => {\n      let handValue;\n      if (isSoft) {\n        if (parseInt(key) === 12) handValue = \"A,A\";\n        else handValue = `A,${key - 11}`;\n      } else if (hasPair) {\n        if (parseInt(key) === 28) handValue = \"A,A\";\n        else {\n          let value = key / 2;\n          handValue = `${value},${value}`;\n        }\n      } else {\n        handValue = key;\n      }\n      localRow.push(createData(handValue, [...Object.values(val)]));\n    });\n    setRow(localRow.reverse());\n  };\n\n  return (\n    <Box>\n      <TableContainer\n        sx={{\n          backgroundColor: \"rgba(0, 0, 0, 0.7)\",\n          display: \"flex\",\n          borderRadius: \"20px\"\n        }}\n      >\n        <Box\n          sx={{\n            color: \"#fff\",\n            writingMode: \"vertical-lr\",\n            transform: \"rotate(180deg)\"\n          }}\n        >\n          <Typography sx={{ px: 1 }}>{sideBarText}</Typography>\n        </Box>\n        <Box>\n          <Box sx={{ color: \"#fff\" }}>\n            <Typography sx={{ py: 1 }}>Dealer Shown Card</Typography>\n          </Box>\n          <Table aria-label=\"simple table\">\n            <TableBody>\n              {/* DEALER SHOWN CARD */}\n              <TableRow sx={{ position: \"relative\" }}>\n                <TableCell\n                  sx={{ ...tdStyle.cell, ...tdStyle.handValue }}\n                ></TableCell>\n                {dealerShownCards.map((dealerShownCard) => (\n                  <TableCell\n                    sx={{ ...tdStyle.cell, ...tdStyle.handValue }}\n                    align=\"center\"\n                  >\n                    <div className=\"horizontal-center-absolute vertical-center-absolute\">\n                      {dealerShownCard}\n                    </div>\n                  </TableCell>\n                ))}\n              </TableRow>\n              {/* END DEALER SHOWN CARD */}\n              {rows.map((row) => (\n                <TableRow key={row.name}>\n                  <TableCell\n                    sx={{ ...tdStyle.cell, ...tdStyle.handValue }}\n                    align=\"center\"\n                  >\n                    {row.playerHand}\n                  </TableCell>\n                  {row.values.map((val) => (\n                    <TableCell\n                      sx={{\n                        ...tdStyle.cell,\n                        ...ColorConstants.BACKGROUND_COLORS[val]\n                      }}\n                      align=\"center\"\n                    >\n                      <div className=\"horizontal-center-absolute vertical-center-absolute\">\n                        {val}\n                      </div>\n                    </TableCell>\n                  ))}\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </Box>\n      </TableContainer>\n    </Box>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    table: state.table?.table,\n    showBasicStrategyChart: state.settings.showBasicStrategyChart,\n    basicStrategyCharts: state.basicStrategy.basicStrategyCharts\n  };\n};\n\nexport default connect(mapStateToProps, null)(BasicStrategyChart);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}