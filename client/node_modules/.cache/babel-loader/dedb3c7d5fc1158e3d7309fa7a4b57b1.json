{"ast":null,"code":"import _objectSpread from\"/home/runner/work/blackjack-gto/blackjack-gto/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/runner/work/blackjack-gto/blackjack-gto/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"styles/NumberBanner.scss\";import{connect}from\"react-redux\";import React from\"react\";import TableUtils from\"../../utils/TableUtils\";import ConstantsFE from\"../../utils/constants/ConstantsFE\";import{jsx as _jsx}from\"react/jsx-runtime\";var NumberBanner=function NumberBanner(props){var table=props.table,id=props.id,player=props.player,animations=props.animations,animationsEnabled=props.animationsEnabled;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isTurn=_React$useState2[0],setIsTurn=_React$useState2[1];var _React$useState3=React.useState(0),_React$useState4=_slicedToArray(_React$useState3,2),value=_React$useState4[0],setValue=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),display=_React$useState6[0],setDisplay=_React$useState6[1];var _React$useState7=React.useState({}),_React$useState8=_slicedToArray(_React$useState7,2),positionStyles=_React$useState8[0],setPositionStyles=_React$useState8[1];React.useEffect(function(){if(!table||!player)return;setValue(player.cardTotal);setIsTurn(id===table.turnId);if(table.tableState===ConstantsFE.T_STATE_PLAYING){setPositionStyles({margin:\"45px 0 0 2px\"});}else{setPositionStyles({top:\"45px\",left:\"2px\"});}},[table,player,id]);var currentPlayerAnimationCompleted=animations.playerAnimationCompleted[id];React.useEffect(function(){if(!table)return;if(!animationsEnabled){setDisplay(true);return;}var player;var animationCompleted;if(id===ConstantsFE.DEALER_ID){player=table.dealer;animationCompleted=player.shouldShowAllCards?animations.dealerAnimationCompleted:animations.dealerAnimationCompleted-1;}else{player=TableUtils.findPlayerById(table.players,table.turnId);animationCompleted=animations.playerAnimationCompleted[id];}setDisplay(player.shownCards.length===animationCompleted&&table.tableState!==ConstantsFE.T_STATE_END);},[table,animations.dealerAnimationCompleted,animations.playerAnimationCompleted,currentPlayerAnimationCompleted,animationsEnabled,id]);if(display){return/*#__PURE__*/_jsx(\"div\",{className:\"number-banner-container \".concat(isTurn?\"number-banner-active\":\"\"),style:_objectSpread({width:\"calc(100% - 4px)\"},positionStyles),children:value});}};var mapStateToProps=function mapStateToProps(state){var _state$table,_state$animations;return{table:(_state$table=state.table)===null||_state$table===void 0?void 0:_state$table.table,animations:state.animations,animationsEnabled:(_state$animations=state.animations)===null||_state$animations===void 0?void 0:_state$animations.animationsEnabled};};export default connect(mapStateToProps,null)(NumberBanner);","map":{"version":3,"names":["connect","React","TableUtils","ConstantsFE","NumberBanner","props","table","id","player","animations","animationsEnabled","useState","isTurn","setIsTurn","value","setValue","display","setDisplay","positionStyles","setPositionStyles","useEffect","cardTotal","turnId","tableState","T_STATE_PLAYING","margin","top","left","currentPlayerAnimationCompleted","playerAnimationCompleted","animationCompleted","DEALER_ID","dealer","shouldShowAllCards","dealerAnimationCompleted","findPlayerById","players","shownCards","length","T_STATE_END","width","mapStateToProps","state"],"sources":["/home/runner/work/blackjack-gto/blackjack-gto/client/src/components/players/NumberBanner.js"],"sourcesContent":["import \"styles/NumberBanner.scss\";\nimport { connect } from \"react-redux\";\nimport React from \"react\";\nimport TableUtils from \"../../utils/TableUtils\";\nimport ConstantsFE from \"../../utils/constants/ConstantsFE\";\n\nconst NumberBanner = (props) => {\n  const { table, id, player, animations, animationsEnabled } = props;\n  const [isTurn, setIsTurn] = React.useState(false);\n  const [value, setValue] = React.useState(0);\n  const [display, setDisplay] = React.useState(false);\n\n  const [positionStyles, setPositionStyles] = React.useState({});\n  React.useEffect(() => {\n    if (!table || !player) return;\n    setValue(player.cardTotal);\n    setIsTurn(id === table.turnId);\n    if (table.tableState === ConstantsFE.T_STATE_PLAYING) {\n      setPositionStyles({ margin: \"45px 0 0 2px\" });\n    } else {\n      setPositionStyles({ top: \"45px\", left: \"2px\" });\n    }\n  }, [table, player, id]);\n\n  const currentPlayerAnimationCompleted =\n    animations.playerAnimationCompleted[id];\n\n  React.useEffect(() => {\n    if (!table) return;\n    if (!animationsEnabled) {\n      setDisplay(true);\n      return;\n    }\n    let player;\n    let animationCompleted;\n    if (id === ConstantsFE.DEALER_ID) {\n      player = table.dealer;\n      animationCompleted = player.shouldShowAllCards\n        ? animations.dealerAnimationCompleted\n        : animations.dealerAnimationCompleted - 1;\n    } else {\n      player = TableUtils.findPlayerById(table.players, table.turnId);\n      animationCompleted = animations.playerAnimationCompleted[id];\n    }\n    setDisplay(\n      player.shownCards.length === animationCompleted &&\n        table.tableState !== ConstantsFE.T_STATE_END\n    );\n  }, [\n    table,\n    animations.dealerAnimationCompleted,\n    animations.playerAnimationCompleted,\n    currentPlayerAnimationCompleted,\n    animationsEnabled,\n    id\n  ]);\n\n  if (display) {\n    return (\n      <div\n        className={`number-banner-container ${\n          isTurn ? \"number-banner-active\" : \"\"\n        }`}\n        style={{\n          width: \"calc(100% - 4px)\",\n          ...positionStyles\n        }}\n      >\n        {value}\n      </div>\n    );\n  }\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    table: state.table?.table,\n    animations: state.animations,\n    animationsEnabled: state.animations?.animationsEnabled\n  };\n};\n\nexport default connect(mapStateToProps, null)(NumberBanner);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}